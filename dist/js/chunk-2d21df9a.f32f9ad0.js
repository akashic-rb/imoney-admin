(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21df9a"],{d41e:function(e,t,s){"use strict";s.r(t);var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",[s("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],attrs:{indeterminate:"",color:"teal"}}),s("v-card",{staticClass:"mx-auto"},[e.employee?s("v-form",{ref:"form",attrs:{"lazy-validation":"",disabled:e.saving},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[s("v-card-title",[e._v("Details")]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{rules:e.firstNameRules,label:"Firstname",required:""},model:{value:e.employee.profile.firstName,callback:function(t){e.$set(e.employee.profile,"firstName",t)},expression:"employee.profile.firstName"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{rules:e.lastNameRules,label:"Lastname",required:""},model:{value:e.employee.profile.lastName,callback:function(t){e.$set(e.employee.profile,"lastName",t)},expression:"employee.profile.lastName"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{value:e.email,rules:e.emailRules,label:"E-mail",required:""},model:{value:e.employee.email,callback:function(t){e.$set(e.employee,"email",t)},expression:"employee.email"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{rules:e.phoneRules,label:"Phone",required:""},model:{value:e.employee.phone,callback:function(t){e.$set(e.employee,"phone",t)},expression:"employee.phone"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.genderItems,label:"Gender",required:""},model:{value:e.employee.profile.gender,callback:function(t){e.$set(e.employee.profile,"gender",t)},expression:"employee.profile.gender"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.dob,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){e.dob=t},"update:return-value":function(t){e.dob=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var l=t.on,r=t.attrs;return[s("v-text-field",e._g(e._b({attrs:{label:"Date of birth","prepend-icon":"mdi-calendar",rules:[e.invalidDOB],readonly:""},model:{value:e.employee.profile.dob,callback:function(t){e.$set(e.employee.profile,"dob",t)},expression:"employee.profile.dob"}},"v-text-field",r,!1),l))]}}],null,!1,3688840559),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[s("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.employee.profile.dob,callback:function(t){e.$set(e.employee.profile,"dob",t)},expression:"employee.profile.dob"}},[s("v-spacer"),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel ")]),s("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.dob)}}},[e._v(" OK ")])],1)],1)],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.universityRules,label:"University",required:""},model:{value:e.employee.profile.university,callback:function(t){e.$set(e.employee.profile,"university",t)},expression:"employee.profile.university"}})],1)],1)],1),s("v-card-title",[e._v("Job")]),s("v-card-text",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.statusItems,rules:e.statusRules,label:"Status",required:""},model:{value:e.employee.status,callback:function(t){e.$set(e.employee,"status",t)},expression:"employee.status"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.teamItems,rules:e.teamRules,label:"Team",required:""},model:{value:e.employee.team,callback:function(t){e.$set(e.employee,"team",t)},expression:"employee.team"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.skillItems,rules:[e.required],label:"Skills",multiple:"","small-chips":"","deletable-chips":"",clearable:"","hide-selected":"","menu-props":{top:!1,offsetY:!0}},model:{value:e.employee.skills,callback:function(t){e.$set(e.employee,"skills",t)},expression:"employee.skills"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.rolesList,rules:[e.required],label:"Roles",multiple:"","small-chips":"","deletable-chips":"",clearable:"","hide-selected":"","menu-props":{top:!1,offsetY:!0},disabled:""},model:{value:e.employee.roles,callback:function(t){e.$set(e.employee,"roles",t)},expression:"employee.roles"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{attrs:{"item-value":"id","item-text":"name",items:e.permissionsList,label:"Permissions",multiple:"","small-chips":"","deletable-chips":"",clearable:"","hide-selected":"","menu-props":{top:!1,offsetY:!0}},model:{value:e.employee.permissions,callback:function(t){e.$set(e.employee,"permissions",t)},expression:"employee.permissions"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{label:"Start date","prepend-icon":"mdi-calendar",disabled:""},model:{value:e.employee.startDate,callback:function(t){e.$set(e.employee,"startDate",t)},expression:"employee.startDate"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[e.employee.endDate?s("v-text-field",{attrs:{label:"End date","prepend-icon":"mdi-calendar",disabled:""},model:{value:e.employee.endDate,callback:function(t){e.$set(e.employee,"endDate",t)},expression:"employee.endDate"}}):e._e()],1)],1),s("v-checkbox",{attrs:{rules:e.checkboxRules,label:"Do you agree?",required:""},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}})],1),s("v-card-actions",[s("v-btn",{staticClass:"mr-4",attrs:{loading:e.saving,disabled:e.saving},on:{click:function(t){return e.saveEdit()}}},[e._v(" Save ")]),s("v-btn",{attrs:{disabled:e.saving},on:{click:e.clear}},[e._v(" Clear ")])],1)],1):e._e()],1)],1)},r=[],a=s("53ca"),i=s("5530"),n=s("1da1"),o=(s("d81d"),s("b64b"),s("96cf"),s("2f62")),c=s("c9d9"),m=s("1490"),u={data:function(){return{valid:!0,loading:!1,email:"",menu:!1,dob:(new Date).toISOString().substr(0,10),skills:[],roles:[],permissions:[],checkbox:!1,saving:!1,emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"},function(e){return e&&e.length>=15||"E-mail must be at least 15 characters"},function(e){return e&&e.length<=50||"E-mail must not be greater than 50 characters"}],phoneRules:[function(e){return!!e||"Phone is required"},function(e){return/^\d{10}$/.test(e)||"Phone is invalid"}],firstNameRules:[function(e){return!!e||"Firstname is required"},function(e){return/^[A-Za-z]+$/.test(e)||"Firstname can't contain numbers or special characters"},function(e){return e&&e.length<=20||"Firstname must be less than 20 characters"}],lastNameRules:[function(e){return!!e||"Lastname is required"},function(e){return/^[A-Za-z]+$/.test(e)||"Lastname can't contain numbers or special characters"},function(e){return e&&e.length<=20||"Lastname must be less than 20 characters"}],universityRules:[function(e){return!!e||"University is required"},function(e){return e&&e.length>=6||"University must be at least 6 characters"}],statusRules:[function(e){return!!e||"Status is required"}],teamRules:[function(e){return!!e||"Team is required"}],checkboxRules:[function(e){return!!e||"You must agree to continue!"}]}},mounted:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.setBreadcrumb([{title:"Employee",route:"employeeListing"},{title:"Edit"}]),e.getRolesList(),e.getPermissionsList(),e.getEmployee();case 4:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["d"])("role/getAll",{rolesList:"rolesList",rolesListLoading:"loading"})),Object(o["d"])("permission/getAll",{permissionsList:"permissionsList",permissionsListLoading:"loading"})),Object(o["d"])("employee/get",{employee:"employee",getLoading:"loading"})),Object(o["d"])("employee/update",{error:"error",updateLoading:"loading"})),{},{genderItems:function(){return Object.keys(c["a"]).map((function(e){return{id:c["a"][e],name:Object(m["c"])(e)}}))},statusItems:function(){return Object.keys(c["c"]).map((function(e){return{id:c["c"][e],name:Object(m["c"])(e)}}))},teamItems:function(){return Object.keys(c["d"]).map((function(e){return{id:c["d"][e],name:Object(m["b"])(e)}}))},skillItems:function(){return Object.keys(c["b"]).map((function(e){return{id:c["b"][e],name:Object(m["a"])(e)}}))}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(o["b"])("breadcrumbs",["setBreadcrumb"])),Object(o["b"])("role/getAll",["getAllRoles"])),Object(o["b"])("permission/getAll",["getAllPermissions"])),Object(o["b"])("employee/get",["get"])),Object(o["b"])("employee/update",["update"])),{},{getRolesList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=["Admin"],t.next=3,e.getAllRoles({key:null,except:s,itemsPerPage:-1});case 3:case"end":return t.stop()}}),t)})))()},getPermissionsList:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getAllPermissions();case 2:case"end":return t.stop()}}),t)})))()},getEmployee:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.get(e.$route.params.id);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},saveEdit:function(){var e=this;if(this.valid=this.$refs.form.validate(),"object"===Object(a["a"])(this.employee.team)&&(this.employee.team=this.employee.team.id),"object"===Object(a["a"])(this.employee.skills[0])&&(this.employee.skills=this.employee.skills.map((function(e){return e.id}))),"object"===Object(a["a"])(this.employee.roles[0])&&(this.employee.roles=this.employee.roles.map((function(e){return e.id}))),"object"===Object(a["a"])(this.employee.permissions[0])&&(this.employee.permissions=this.employee.permissions.map((function(e){return e.id}))),this.valid){this.saving=!0;var t={email:this.employee.email,phone:this.employee.phone,first_name:this.employee.profile.firstName,last_name:this.employee.profile.lastName,gender:this.employee.profile.gender,dob:this.employee.profile.dob,university:this.employee.profile.university,status:this.employee.status,team_id:this.employee.team,skills:this.employee.skills,role_id:this.employee.roles,permission_id:this.employee.permissions};setTimeout(Object(n["a"])(regeneratorRuntime.mark((function s(){var l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.update({id:e.$route.params.id,info:t});case 2:l=s.sent,l?(e.$notify({title:"Update employee successfully!",type:"success"}),e.$router.push({name:"employeeListing"})):e.$notify({title:"Update employee failed!",text:e.error,type:"error"}),e.saving=!1;case 5:case"end":return s.stop()}}),s)}))),2e3)}},clear:function(){this.$refs.form.resetValidation()},required:function(e){return e instanceof Array&&0==e.length?"This field is required":!!e||"This field is required"},invalidDOB:function(e){var t=new Date("2005-01-01"),s=new Date(e);return s>t?"DOB must be a date before 01-01-2005":!!e||"DOB is invalid"}})},d=u,p=s("2877"),f=s("6544"),b=s.n(f),v=s("8336"),y=s("b0af"),h=s("99d9"),g=s("ac7c"),x=s("62ad"),k=s("a523"),O=s("2e4b"),j=s("4bd4"),R=s("e449"),w=s("8e36"),$=s("0fd9"),L=s("b974"),q=s("2fa4"),D=s("8654"),V=Object(p["a"])(d,l,r,!1,null,null,null);t["default"]=V.exports;b()(V,{VBtn:v["a"],VCard:y["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCheckbox:g["a"],VCol:x["a"],VContainer:k["a"],VDatePicker:O["a"],VForm:j["a"],VMenu:R["a"],VProgressLinear:w["a"],VRow:$["a"],VSelect:L["a"],VSpacer:q["a"],VTextField:D["a"]})}}]);
//# sourceMappingURL=chunk-2d21df9a.f32f9ad0.js.map